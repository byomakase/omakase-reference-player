# Session JSON v3.0


# **Overview**

This document describes the "v3.0" JSON structure used to bootstrap a Reference Player session. A session JSON consists of five top-level fields and is structured as follows

```json
{
    "version": "3.0",
    "session": {
    },
    "presentation": {
    },
    "sources": [
    ],
    "media": {
    }
}
```


| **Field**      | **Description**                                                                                                                     | **Type**        | **Req / Opt** |
|:---------------|:------------------------------------------------------------------------------------------------------------------------------------|:----------------|:-------------:|
| `version`      | Indicates the version of the Session JSON file                                                                                      | String          |      Req      |
| `session`      | Specified information related to the player session                                                                                 | Complex Object  |      Opt      |
| `sources`      | Provides a listing of files that are associated with the session                                                                    | Array of Source |      Opt      |
| `media`        | Provides information about video, audio and text media that is available to the session                                             | Complex Object  |      Req      |
| `presentation` | Specifies tab information and directives used to control the layout of the session. Field also specifies the layout of the Timeline | Complex Object  |      Req      |
 

\[ [Session](#Session) \] \[ [Sources](#Sources) \] \[ [Media](#Media) \] \[ [Presentation](#Presentation) \]


# **Session**

Field contains information related to the overall session

| **Field**   | **Description**                                                                                                                                                                                          | **Type**                                                                                                              | **Req / Opt** |
|:------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------|:-------------:|
| `id`        | Identifier generated by the session. Typically the identifier will be meaningful to the backend and will identify the resource from which the session was derived                                        | String                                                                                                                |      Opt      |
| `status`    | Indicates the overall status (aka the QC Status) of the session if it is known                                                                                                                           | Constrained values:<ul><li>`unverified`</li><li>`accepted`</li><li>`rejected`</li><li>`hold`</li><li>`reviewing`</li> |      Opt      |
| `next`      | URI used to retrieve the next session                                                                                                                                                                    | URI                                                                                                                   |      Opt      |
| `previous`  | URI used to retrieve the previous session                                                                                                                                                                | URI                                                                                                                   |      Opt      |
| `services`  | Object which provides information about backend resources (e.g. "services") that are used by the player. The object typically consists of multiple maps which each key identifying a specific "service"  | Complex Object                                                                                                        |      Opt      |

> [!NOTE]
> `media_authentication` should be declared on the `services` property in order to use the Reference Player's "out-of-the-box" media authentication capabilities 

## Media Authentication (`media_authentication`)

Field used to specify a media authentication setting and communicate access information

| **Field**  | **Description**                                                                           | **Type**                                                                 | **Req / Opt**<br>**None** | **Req / Opt**<br>**Basic** | **Req / Opt**<br>**Bearer** |
|:-----------|:------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------|:-------------------------:|:--------------------------:|:---------------------------:|
| `type`     | Indicates the type of authentication being used to secure media referenced by the session | Constrained values:<ul><li>`none`</li><li>`basic`</li><li>`bearer`</li>  |            Req            |            Req             |             Req             |
| `username` | Username to be used when generating Base64 basic auth "token"                             | String                                                                   |             -             |            Req             |              -              |
| `password` | Password to be used when generating Base64 basic auth "token"                             | String                                                                   |             -             |            Req             |              -              |
| `token`    | Bearer token                                                                              | String                                                                   |             -             |             -              |             Req             |             


# **Sources**

A `sources` entry can contain the following fields

| **Field**   | **Description**                                                          | **Type**                          | **Req / Opt** |
|:------------|:-------------------------------------------------------------------------|:----------------------------------|:-------------:|
| `id`        | ID used to "link" the source to other information in the session         | String                            |      Opt      |
| `name`      | Name of the source. Typically, this field is populated with the filename | String                            |      Req      |
| `info`      | Defines key/value pairs that help describe the source                    | Object containing key/value pairs |      Opt      |
| `metadata`  | Provides technical metadata (e.g. media info) about the source           | Complex Object                    |      Opt      |


# **Media**

Field describes the media resources that are available to the session

| **Field**   | **Description**                                          | **Type**                | **Req / Opt** |
|:------------|:---------------------------------------------------------|:------------------------|:-------------:|
| `main`      | Provides a listing of (HLS and MP4) main media resources | Array of Main Media     |      Req      |
| `sidecars`  | Provides information about additional sidecar resources  | Array of Sidecar Media  |      Opt      |
  

## Main Media Entry

| **Field**     | **Description**                                                                                                                                                          | **Type**                                                                       | **Main Media Type**<br>**HLS** | **Main Media Type**<br>**MP4** |
|:--------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------|:------------------------------:|:------------------------------:|
| `name`        | Human readable, descriptive identifier used to identify the manifest within the UX                                                                                       | String                                                                         |              Req               |              Req               |
| `type`        | Indicates the format of the entry - e.g. HLS or Progressive MP4                                                                                                          | Constrained values:<ul><li>`hls`</li><li>`mp4`</li>                            |              Req               |              Req               |
| `id`          | Main media identifier                                                                                                                                                    | String                                                                         |              Opt               |              Req               |
| `url`         | URL used to retrieve the media                                                                                                                                           | URL                                                                            |              Req               |              Req               |
| `codec`       | Indicates the video codec used by the manifest. If unspecified, a value of `h264` is assumed                                                                               | Constrained values:<ul><li>`h264`</li><li>`h265`</li></ul>                     |              Opt               |              Opt               | |                                                                                                                                                                       | |         | |                                                                                                                                                                       | -   h264              | |
| `color_range` | Indicates the dynamic range / color space used by the manifest. If unspecified, a value of `sdr` is assumed                                                              | Constrained values:<ul><li>`sdr`</li><li>`hdr10`</li><li>`dolby_vision_5`</li> |              Opt               |              Opt               | |                                                                                                                                                                       | |         | |                                                                                                                                                                       | -   sdr               | |
| `frame_rate`  | Indicates the the frame rate of the video. Typically this is express as a fraction - e.g. `30000/1001` but can also be expressed as a Number (though this is not ideal)  | String or Number \> 0                                                          |              Opt               |              Req               | |                                                                                                                                                                       | |         | | For HLS media, value is retrieved from the M3U8                                                                                                                       | |         |
| `drop_frame`  | Indicates whether frame rate is drop frame or non drop frame. If unspecified, a value of `false` is assumed                                                              | Boolean                                                                        |              Opt               |              Opt               |
| `ffom`        | Indicates the timecode of the First Frame of Media (FFOM). If unspecified, `00:00:00:00` is assumed                                                                      | Timecode                                                                       |              Opt               |              Opt               |

> [!NOTE]
> For HLS media, the `frame_rate` value is retrieved from the M3U8.

## Sidecar Entry

| **Field** | **Description**                                            | **Type**                                                    | **Main Media Type**<br>**Audio** | **Main Media Type**<br>**Text** |
|:----------|:-----------------------------------------------------------|:------------------------------------------------------------|:--------------------------------:|:-------------------------------:|
| `id`      | Sidecar media identifier                                   | String                                                      |               Req                |               Req               |               
| `type`    | Indicates the kind of information contained in the sidecar | Constrained values:<ul><li>`audio`</li><li>`text`</li></ul> |               Req                |               Req               |
| `url`     | URL used to retrieve the media                             | URL                                                         |               Req                |               Req               |


# **Presentation**

Field contains information about how the player should be configured. This includes the layout of the timeline as well as the features that should be active

| **Field**              | **Description**                                                                                                                  | **Type**                     | **Req / Opt** |
|:-----------------------|:---------------------------------------------------------------------------------------------------------------------------------|:-----------------------------|:-------------:|
| `layout`               | Field contains settings related to the overall layout of the player                                                              | Complex Object               |      Opt      |
| `timeline`             | Describes the layout and track ordering of the timeline                                                                          | Complex Object               |      Req      |      
| `info_tabs`            | Field defines a listing of tabs that are presented in the upper right of the player                                              | Array of Info Tab            |      Opt      |      
| `segmentation_actions` | Field specifies a list of Segmentation related actions that should be exposed in the "action" menu associated with a marker list | Array of Segmentation Action |      Opt      |

> [!NOTE]
> If the `segmentation_actions` field is not specified, no (additional) actions are defined on a marker list.

## Layout

| **Field**              | **Description**                                                                               | **Type** | **Req / Opt** |
|:-----------------------|:----------------------------------------------------------------------------------------------|:---------|:-------------:|
| `segmentation`         | Flag indicating that the player player Segmentation experience (tab) should be part of the UX | Boolean  |      Opt      |
| `approval`             | Flag indicating whether the Approval Control should be surfaced in the player                 | Boolean  |      Opt      |
| `annotations`          | Flag indicating whether the UX should support the capture of time-dependent annotations       | Boolean  |      Opt      |
| `annotation_threading` | Flag indicating whether annotations should support threading                                  | Boolean  |      Opt      |

> [!NOTE]
> If the `approval`, `annotations` or `annotation_threading` fields are not specified, a value of `false` is assumed for the field.

## Timeline

| **Field**       | **Description**                                                              | **Type**       | **Req / Opt** |
|:----------------|:-----------------------------------------------------------------------------|:---------------|:-------------:|
| `tracks`        | Listing and description of the tracks that should be defined on the timeline | Array of Track |      Req      |
| `configuration` | Additional timeline related settings                                         | Complex Object |      Opt      |


## Track

| **Field**            | **Description**                                                                                                                                                                                        | **Type**                                                                    | **Req / Opt**<br>**Video** | **Req / Opt**<br>**Audio** | **Req / Opt**<br>**Text** |
|:---------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------|:--------------------------:|:--------------------------:|:-------------------------:|
| `id`                 | Unique identifier                                                                                                                                                                                      | String                                                                      |            Opt             |            Opt             |            Opt            |
| `type`               | Indicates the type of information represented by the track                                                                                                                                             | Constrained values:<ul><li>`video`</li><li>`audio`</li><li>`text`</li></ul> |            Req             |            Req             |            Req            |
| `source_id`          | ID of the source from which the track is derived                                                                                                                                                       | String                                                                      |            Opt             |            Opt             |            Opt            |
| `media_id`           | Identifies the media resource represented by the track. For an HLS backed resource, this will be an `EXT-X-MEDIA` NAME attribute. In the case of a sidecar, this will be the `id` of the sidecar entry | String                                                                      |             -              |            Req             |            Req            |             
| `channel_layout`     | Specifies the Channel ordering with the track. Typical values:<ul><li>`L R`</li><li>`L R C LFE LS RS`</li></ul>                                                                                        | String                                                                      |             -              |            Opt             |             -             |                                                                                                                                                                                                    | |           | |                  | -   L R                                                                                                                                                                                            | |           | |                  | |                | |
| `language`           | ISO 639 two letter code indicating the language of the  track                                                                                                                                          | String(2)                                                                   |             -              |            Opt             |            Opt            |
| `visual_reference`   | Lists resources that can be used to visual the track                                                                                                                                                   | Array of Visual Reference Entry                                             |            Opt             |            Opt             |            Opt            |            
| `analysis`           | Lists resources that contain analysis data derived from the track                                                                                                                                      | Array of Analysis Entry                                                     |            Opt             |            Opt             |            Opt            |            
| `style`              | Provides styling hints related to the track                                                                                                                                                            | Complex Object                                                              |            Opt             |            Opt             |            Opt            |            



## Style
| **Field** | **Description**                                                                                          | **Type** | **Req / Opt** |
|:----------|:---------------------------------------------------------------------------------------------------------|:---------|:-------------:|
| `hidden`  | Indicates whether the track should be hidden on load.<br>If unspecified, a value of `false` is assumed   | Boolean  |      Opt      |


## Timeline Configuration
| **Field**                  | **Description**                                                                                                    | **Type**        | **Req / Opt** |
|:---------------------------|:-------------------------------------------------------------------------------------------------------------------|:----------------|:-------------:|
| `visible_analysis_groups`  | Array of analysis group values indicating the analysis tracks that should be visible when the session first loads  | Array of String |      Opt      |


## Visual Reference Entry

| **Field** | **Description**                                                                                                                                        | **Type**                                                                                             | **Reference Type**<br>**Thumbnails** | **Reference Type**<br>**Waveform** |
|:----------|:-------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------|:------------------------------------:|:----------------------------------:|
| `type`    | Indicates the type of visual reference data returned by url                                                                                            | Constrained values:<ul><li>`thumbnails`</li><li>`waveform`</li>                                      |                 Req                  |                Req                 |
| `channel` | Indicates the channel that is being visualized. If unspecified on a waveform, the waveform is assumed to be visualizing the sound field (all channels) | Constrained values:<ul><li>`L`</li><li>`R`</li><li>`C`</li><li>`LFE`</li><li>`LS`</li><li>`RS`</li>  |                  -                   |                Opt                 |
| `url`     | URL used to retrieve the visual reference data                                                                                                         | URL                                                                                                  |                 Req                  |                Req                 |


## Analysis Entry

| **Field**       | **Description**                                                                                            | **Type**                                                                                                                                 | **Analysis Type**<br>**Chart** | **Analysis Type**<br>**Events** |
|:----------------|:-----------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------|:------------------------------:|:-------------------------------:|
| `name`          | Describes the analysis data being visualized                                                               | String                                                                                                                                   |              Req               |               Req               |               
| `group`         | Associates the analysis data with a grouping                                                               | String                                                                                                                                   |              Opt               |               Opt               |               
| `type`          | Indicates the type of analysis data and (broadly) how it should be visualized                              | Constrained values:<ul><li>`chart`</li><li>`events`</li></ul>                                                                            |              Req               |               Req               |
| `visualization` | Indicates how the analysis data should be visualized                                                       | Constrained values:<br>**Chart**<ul><li>`line`</li><li>`bar`</li><li>`led`</li></ul><br>**Events**<ul><li>`marker`</li><li>`point`</li>  |              Req               |               Req               |
| `y_min`         | Indicates the minimum value in the analysis data                                                           | Number                                                                                                                                   |              Opt               |                -                |                
| `y_max`         | Indicates the maximum value in the analysis data                                                           | Number                                                                                                                                   |              Opt               |                -                |                
| `scale`         | Specifies a scale that should be used to visualize the analysis data. If unspecified, `linear` is assumed  | Constrained values:<ul><li>`linear`</li></ul>                                                                                            |              Opt               |                -                |
| `url`           | URL used to retrieve the analysis data                                                                     | URL                                                                                                                                      |              Req               |               Req               |               


## Info Tab Entry

| **Field**        | **Description**                                                                                                                                       | **Type**                                                                                                                       | **Req / Opt** |
|:-----------------|:------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------|:-------------:|
| `name`           | Indicates how the tab should be identified within the UX                                                                                              | String                                                                                                                         |      Req      |
| `type`           | Indicates the type of information that is being presented in the tab                                                                                  | Constrained values:<ul><li>`json`</li><li>`file_list`</li></ul>                                                                |      Req      |
| `visualization`  | Specifies how the information (e.g. data) should be visualized                                                                                        | Constrained values:<br>**JSON**<ul><li>`json_tree`</li><li>`formatted_json`</li></ul>**File List**<ul><li>`list`</li></ul> |      Req      |
| `data`           | Data payload to be visualized                                                                                                                         | Complex Object                                                                                                                 |      Req      |
| `files`          | Listing of files. The following information can be associated with a file:<ul><li>`filename`</li><li>`description` (optional)</li><li>`url`</li></ul> | Array of Complex Object                                                                                                        |      Req      |                                                                            | |

> [!NOTE]
> The `data` field is only applicable when the `type` is `json` and is then required.  
> The `files` field is only applicable when the `type` is `file_list` and is then required.


## Segmentation Action Entry
| **Field** | **Description**                                                                                                       | **Type**       | **Req / Opt** |
|:----------|:----------------------------------------------------------------------------------------------------------------------|:---------------|:-------------:|
| `name`    | UX friendly name used to identify the action                                                                          | String         |      Req      |
| `data`    | An object specifying optional configuration information that is provided to the JavaScript function handling actions  | Complex Object |      Opt      | 
